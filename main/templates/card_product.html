{% load static %}
<article
  class="bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-blue-100"
>
  <!-- Thumbnail -->
  <div
    class="aspect-[16/9] relative overflow-hidden bg-gradient-to-br from-blue-50 to-blue-100"
  >
    {% if product.thumbnail %}
    <img
      src="{{ product.thumbnail }}"
      alt="{{ product.title }}"
      class="w-full h-full object-cover hover:scale-105 transition-transform duration-500"
    />
    {% else %}
    <div
      class="w-full h-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center"
    >
      <svg
        class="w-20 h-20 text-blue-300"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.5"
          d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
        />
      </svg>
    </div>
    {% endif %}
    <!-- Category Badge -->
    <div class="absolute top-3 left-3">
      <span
        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-600 text-white shadow-lg backdrop-blur-sm"
      >
        {{ product.get_category_display }}
      </span>
    </div>
    <!-- Status Badges -->
    <div class="absolute top-3 right-3 flex gap-2">
      {% if product.is_featured %}
      <span
        class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-400 text-amber-900 shadow-md"
      >
        ‚≠ê Featured
      </span>
      {% endif %} {% if product.is_product_hot %}
      <span
        class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-rose-500 text-white shadow-md"
      >
        üî• Hot
      </span>
      {% endif %}
    </div>
  </div>
  <!-- Content -->
  <div class="p-6">
    <div class="flex items-center text-xs text-blue-600 font-medium mb-3">
      <time datetime="{{ product.created_at|date:'c' }}">
        {{ product.created_at|date:"M j, Y" }}
      </time>
      <span class="mx-2 text-blue-300">‚Ä¢</span>
      <span class="flex items-center gap-1">
        <svg
          class="w-3.5 h-3.5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          />
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
          />
        </svg>
        {{ product.product_views }}
      </span>
    </div>
    <h3 class="text-xl font-bold text-gray-900 mb-3 line-clamp-2 leading-snug">
      <a
        href="{% url 'main:show_product' product.id %}"
        class="hover:text-blue-600 transition-colors duration-200"
      >
        {{ product.title }}
      </a>
    </h3>
    <p class="text-gray-600 text-sm leading-relaxed line-clamp-3 mb-5">
      {{ product.content|truncatewords:20 }}
    </p>
    <!-- Action Buttons -->
    {% if user.is_authenticated and product.user == user %}
    <div class="flex items-center justify-between pt-4 border-t border-blue-50">
      <a
        href="{% url 'main:show_product' product.id %}"
        class="inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold text-sm transition-colors duration-200 group"
      >
        Read more
        <svg
          class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </a>
      <div class="flex gap-3">
        <a
          href="{% url 'main:edit_product' product.id %}"
          class="text-blue-600 hover:text-blue-700 hover:underline text-sm font-medium transition-colors duration-200"
        >
          Edit
        </a>
        <a
          href="{% url 'main:delete_product' product.id %}"
          class="text-rose-600 hover:text-rose-700 hover:underline text-sm font-medium transition-colors duration-200"
        >
          Delete
        </a>
      </div>
    </div>
    {% else %}
    <div class="pt-4 border-t border-blue-50">
      <a
        href="{% url 'main:show_product' product.id %}"
        class="inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold text-sm transition-colors duration-200 group"
      >
        Read more
        <svg
          class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </a>
    </div>
    {% endif %}
  </div>
</article>
